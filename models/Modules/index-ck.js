var mongoose=require("mongoose"),mongohq_url=process.env.MONGOHQ_URL||"mongodb://heroku:9d7d88ec83810d172f98065cb9398617@flame.mongohq.com:27078/app4216978",db=mongoose.connect(mongohq_url),Schema=db.Schema,Module=new Object,ModuleSchema=new Schema({name:{type:String,unique:!0,"default":"",required:!0,validate:[]},path:{type:String,"default":"/",required:!0},clearance:{type:String,"default":"basic",required:!0},icon:{type:String,"default":"icon-tag"}});mongoose.model("ModuleModel",ModuleSchema);var Module=mongoose.model("ModuleModel"),ModuleModel=function(){};ModuleModel.prototype.findAll=function(a,b){if(typeof a=="function"){b=a;Module.find({},function(a,c){a?b(new Array):b(c)})}else Module.find({clearance:a},function(a,c){a?b(new Array):b(c)})};ModuleModel.prototype.find=function(a){Module.findById(this._id,function(b,c){!b&&c!=undefined?a(c):a(new Module)})};ModuleModel.prototype.create=function(a){var b={_id:this._id},c={name:this.name,path:this.path,icon:this.icon,clearance:this.clearance};Module.update(b,{$set:c},{upsert:!0},a)};ModuleModel.prototype.deleteById=function(a){var b={_id:this._id};Module.remove(b,a)};module.exports=ModuleModel;